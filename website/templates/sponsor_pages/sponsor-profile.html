{% extends "view.html" %} {% block title %}Profile{% endblock %}

{% block view_content %}

{% set count = namespace(value=0) %}
{% set enterOnce = namespace(value="False") %}
  

<!-- Active Campaigns -->
<div class="container mt-4">
        {% set count.value = count.value + 1 %}
        {% set enterOnce.value = "True" %}
        <div class="container mt-5">
          <h2 class="fw-bold">Active Campaigns</h2>
          <div class="table-responsive">
              <table class="table table-striped table-bordered">
                  <thead class="thead-dark">
                      <tr>
                          <th>#</th>
                          <th>Influencer</th>
                          <th>Message</th>
                          <th>Requirements</th>
                          <th>Payment</th>
                          <th>Status</th>
                          <th>Completion</th>
                      </tr>
                  </thead>
                  <tbody style="font-size: 17px">
                      {% for ad in allAds %}
                        {% if user.id == ad.sponsor_id %}
                      <tr>
                          <th scope="row">{{loop.index}}</th>
                          <td>
                            {% for influencer in allInfluencers %}
                              {% if influencer.id == ad.influencer_id %}
                                {{influencer.username}}
                              {% endif %}
                            {% endfor %}
                          </td>
                          <td>{{ad.messages}}</td>
                          <td>{{ad.requirements}}</td>
                          <td>{{ad.payment_amount}}</td>
                          {% if ad.status == "Pending" %}
                            <td class="text-warning fw-bold">{{ad.status}}</td>
                          {% elif ad.status == "Rejected" %}
                            <td class="text-danger fw-bold">{{ad.status}}</td>
                          {% else %}
                            <td class="text-success fw-bold">{{ad.status}}</td>
                          {% endif %}
                          
                          {% if ad.completed == "False" %}
                            <td class="text-warning fw-bold">Ongoing</td>
                          {% else %}
                            <td>
                              <a class="text-success fw-bold btn" href="confirm-completion/{{ad.id}}">
                                Done <i class="fas fa-check text-success"></i>
                              </a>
                            </td>
                          {% endif %}
                      </tr>
                        {% endif %}
                      {% endfor %}
                  </tbody>
              </table>
          </div>
      </div>

</div>

<!-- Completed Campaigns -->
<div class="container mt-4">
        {% set count.value = count.value + 1 %}
        {% set enterOnce.value = "True" %}
        <div class="container mt-5">
          <h2 class="fw-bold">Completed Campaigns</h2>
          <div class="table-responsive">
              <table class="table table-striped table-bordered">
                  <thead class="thead-dark">
                      <tr>
                          <th>#</th>
                          <th>Sponsor</th>
                          <th>Title</th>
                          <th>Description</th>
                          <th>Niche</th>
                          <th>Transaction Amount</th>
                      </tr>
                  </thead>
                  <tbody>
                    {% for complete_campaign in allCompletedCampaigns %}
                    {% if user.id == complete_campaign.sponsor_id %}
                  <tr>
                      <th scope="row">{{loop.index}}</th>
                      <th>{{complete_campaign.sponsor_name}}</th>
                      <th>{{complete_campaign.title}}</th>
                      <th>{{complete_campaign.description}}</th>
                      <th>{{complete_campaign.niche}}</th>
                      <th>{{complete_campaign.transaction_amount}}</th>
                  </tr>
                    {% endif %}
                  {% endfor %}
                  </tbody>
              </table>
          </div>
      </div>

</div>

{% endblock %}
